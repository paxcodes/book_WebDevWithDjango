{% extends 'reviews/base.html' %}

{% block title %}
    {% if form.is_valid and search_text %}
        Search Results for {{ search_text }}
    {% else %}
        Book Search
    {% endif %}
{% endblock title %}

{% block content %}
    <h2>Search for Books</h2>
    <form method="get">
        {{ form.as_p }}
        <input type="submit" value="Submit" class="btn btn-primary" />
    </form>

    {% if form.is_valid and search_text %}
        <h3>Search Results for <em>{{ search_text }}</em></h3>
    {% endif %}

    {% if not results %}
        <p>No results for <em>{{ search_text }}</em></p>
    {% endif %}
    {% for book in results %}
        <div>
            <span>Title:</span> <span>{{ book.title }}</span><br />
            <span>Publisher:</span><span>{{ book.publisher }}</span><br />
            <span>Publication Date:</span><span>{{ book.publication_date }}</span><br />
            <span>Contributors:</span>
            <ul>
            {% for contributor in book.contributors.all %}
                <li>{{ contributor.full_name }}</li>
            {% endfor %}
            </ul>
            <a href="/books/{{ book.id }}">Reviews</a>
        </div>
    {% endfor %}
{% endblock content %}
